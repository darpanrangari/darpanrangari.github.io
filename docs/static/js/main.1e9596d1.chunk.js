(this.webpackJsonpMartian=this.webpackJsonpMartian||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),u=a(22),l=a(80),i=a(26),s=a(41),m=a(42),p=a(51),h=a(44),y=a(50),d=a(52),f=a(146),E=a(162),b=a(29),g=a(33),v={baseCurrency:"USD"},k={currencies:{},rates:{},baseCurrency:v.baseCurrency};var C=a(82),F={pockets:[{currency:"GBP",balance:50},{currency:"USD",balance:100},{currency:"EUR",balance:20}]};var j=Object(b.c)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CURRENCIES":return Object(g.a)({},e,{currencies:t.data});case"FETCH_LATEST_RATE":return Object(g.a)({},e,{rates:t.rates});default:return e}},pockets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EXCHANGE_NOW":var a=e.pockets.map((function(e){if(e.currency===t.data.currencyFrom){var a={currency:e.currency,balance:parseFloat(e.balance)-parseFloat(t.data.currencyFromValue)};return Object(g.a)({},e,{},a)}if(e.currency===t.data.currencyTo){var n={currency:e.currency,balance:parseFloat(e.balance)+parseFloat(t.data.currencyToValue)};return Object(g.a)({},e,{},n)}return e})),n=e.pockets.find((function(e){return e.currency===t.data.currencyTo}));return n||a.push({currency:t.data.currencyTo,balance:parseFloat(t.data.currencyToValue)}),Object(g.a)({},e,{pockets:Object(C.a)(a)});default:return e}}}),T=a(74),x=Object(b.d)(j,Object(b.a)(T.a)),O=function(e){var t={EUR:"\u20ac",GBP:"\xa3",USD:"$"};return t[e]?t[e]:e},R=function(e){var t=x.getState().pockets.pockets.find((function(t){return t.currency===e}));return(t&&t.balance?t.balance:0).toFixed(2)},S=function(e,t,a){var n=x.getState().data.rates.rates,r=v.baseCurrency;if(!n)return 0;if(n[r]=1,!n[t]||!n[a])throw"conversion error";return a===r?(n[t]*e).toFixed(2):t===r?(1/n[a]*e).toFixed(2):(n[t]*(1/n[a])*e).toFixed(2)},V=Object(u.b)((function(e){return{currencies:e.data.currencies}}),{})((function(e){var t=e.selected,a=e.onSelectCurrency,n=e.balance,c=e.currencies;return r.a.createElement(f.a,{variant:"outlined",style:{margin:"40px 0px 10px 0px"}},r.a.createElement(E.a,{native:!0,value:t,onChange:a},r.a.createElement("option",{value:""}),Object.keys(c).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement(d.a,{style:{margin:"10px 0"},variant:"subtitle2",gutterBottom:!0},"Balance: ","".concat(O(t)," ").concat(n)))})),w=a(163),H=function(e){return r.a.createElement(w.a,{style:{margin:"10px 0"},id:"outlined-basic",type:"number",variant:"outlined",value:e.selected,onChange:e.onChangeRate})},N=a(119),P=a(156),B=a(164),_=a(157),U=a(158),I=a(153),A=a(154),G=a(155),L=function(e){return r.a.createElement(I.a,{position:"static"},r.a.createElement(A.a,null,r.a.createElement(G.a,{onClick:e.onClickHandler,edge:"start",color:"inherit","aria-label":"menu"},e.icon),r.a.createElement(d.a,{variant:"h6",color:"inherit"},e.heading)))},D=a(76),M=a.n(D).a.create({baseURL:"https://openexchangerates.org/api"}),W=a(78),J=a.n(W),X=a(77),z=a.n(X),Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onSelectFrom=function(e){var t=e.target.value;a.setState({currencyFrom:t,exchangeRate:S(1,a.state.currencyTo,t)})},a.onChangeRateFrom=function(e){var t=e.target.value;a.setState({currencyFromValue:t.toString().split(".").map((function(e,t){return t?e.split("").slice(0,2).join(""):e})).join("."),currencyToValue:S(t,a.state.currencyTo,a.state.currencyFrom)})},a.onSelectTo=function(e){var t=e.target.value;a.setState({currencyTo:t,exchangeRate:S(1,t,a.state.currencyFrom)})},a.onChangeRateTo=function(e){var t=e.target.value;a.setState({currencyToValue:t.toString().split(".").map((function(e,t){return t?e.split("").slice(0,2).join(""):e})).join("."),currencyFromValue:S(t,a.state.currencyFrom,a.state.currencyTo)})},a.isValidExchangeCase=function(){var e=a.state,t=e.currencyFrom,n=e.currencyFromValue,r=e.currencyTo,c=e.currencyToValue;return!(R(t)>=parseFloat(n)&&t!==r&&parseFloat(n)>=1&&parseFloat(c)>0)},a.exchange=function(){a.props.exchangeNow(a.state),a.props.history.push("/")},a.onClickBack=function(){a.props.history.push("/")},a.state={currencyFrom:"GBP",currencyFromValue:0,currencyTo:"INR",currencyToValue:0},a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.currencyFrom,n=t.currencyTo;this.props.fetchCurrencies(),this.props.fetchLatestRates().then((function(){e.setState({exchangeRate:S(1,n,a)})}))}},{key:"render",value:function(){var e=this.state,t=e.currencyFrom,a=e.currencyTo,n=e.currencyFromValue,c=e.currencyToValue,o=e.exchangeRate;return r.a.createElement("div",{className:"exchange"},r.a.createElement(L,{icon:r.a.createElement(z.a,null),onClickHandler:this.onClickBack,heading:"Exchange"}),r.a.createElement(N.a,{style:{padding:"0 24px"}},r.a.createElement(P.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(V,{balance:R(t),onSelectCurrency:this.onSelectFrom,selected:t}),r.a.createElement(H,{onChangeRate:this.onChangeRateFrom,selected:n})),r.a.createElement(P.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(B.a,{color:"primary",style:{margin:"0.5rem"},variant:"outlined",label:"".concat(O(t)," 1 = ").concat(o," ").concat(O(a)),icon:r.a.createElement(J.a,null)})),r.a.createElement(_.a,null),r.a.createElement(P.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(V,{balance:R(a),onSelectCurrency:this.onSelectTo,selected:a}),r.a.createElement(H,{onChangeRate:this.onChangeRateTo,selected:c})),r.a.createElement(_.a,null),r.a.createElement(U.a,{onClick:this.exchange,style:{margin:"20px 0"},size:"large",disabled:this.isValidExchangeCase(),variant:"contained",color:"secondary"},"Exchange")))}}]),t}(r.a.Component),$={fetchLatestRates:function(){return function(e){return M.get("/latest.json",{params:{app_id:"f3cec79a23274d3a985b6d04ea2b9fea",base:v.baseCurrency}}).then((function(t){console.log(t.data,"**************"),e({type:"FETCH_LATEST_RATE",rates:t.data})})).catch((function(e){throw e}))}},exchangeNow:function(e){return function(t){t({type:"EXCHANGE_NOW",data:e})}},fetchCurrencies:function(){return function(e){return M.get("/currencies.json").then((function(t){e({type:"FETCH_CURRENCIES",data:t.data})})).catch((function(e){throw e}))}}},q=Object(u.b)((function(e){return{pockets:e.pockets.pockets}}),$)(Y),K=a(43),Q=a(159),Z=a(160),ee=function(e){var t=e.data,a=e.onClickHandler;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{onClick:function(){return a(t)}},r.a.createElement(Z.a,{secondary:" Balance : ".concat(O(t.currency)," ").concat(t.balance)},t.currency," "),r.a.createElement(Z.a,null,t.value)),r.a.createElement(_.a,null))},te=a(152),ae=a(79),ne=a.n(ae),re=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handlePocketClick=a.handlePocketClick.bind(Object(K.a)(a)),a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"getPockets",value:function(){var e=this,t=this.props.pockets;return t.length?t.map((function(t){return r.a.createElement(ee,{data:t,key:t.currency,onClickHandler:e.handlePocketClick})})):r.a.createElement("p",null," You don't not have any pockets")}},{key:"handlePocketClick",value:function(){this.props.history.push("/exchange")}},{key:"render",value:function(){return r.a.createElement(N.a,null,r.a.createElement(L,{icon:r.a.createElement(ne.a,null),heading:"Pockets"}),r.a.createElement(te.a,{component:"nav","aria-label":"pockets available"},this.getPockets()))}}]),t}(r.a.Component),ce=Object(u.b)((function(e){return{pockets:e.pockets.pockets}}),{})(re),oe=a(161);o.a.render(r.a.createElement(u.a,{store:x},r.a.createElement(l.a,null,r.a.createElement(oe.a,{maxWidth:"sm"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:ce}),r.a.createElement(i.a,{path:"/exchange",component:q}))))),document.getElementById("root"))},89:function(e,t,a){e.exports=a(118)}},[[89,1,2]]]);
//# sourceMappingURL=main.1e9596d1.chunk.js.map